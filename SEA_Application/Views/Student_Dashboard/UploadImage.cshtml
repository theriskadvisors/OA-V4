@*@{
        Layout = null;
    }*@




<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body p-5">

                <div class="tab-content" style="">

                    <div class="tab-pane active" id="tab_1">

                        @using (Html.BeginForm("UploadStudentImage", "Student_Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", @class = "forms form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()



                            <div class="row">
                                <div class="col-md-12 pl-3 pr-5">
                                    <center>

                                        <div style="height: 120px;width:200px;" class="upload-photo border rounded d-flex align-items-center justify-content-center flex-column mb-4">
                                            <a href="#">
                                                <img id="imgPreview" src="~/Content/Images/Upload.png" onclick="$('#UploadImg').click();" />
                                            </a>
                                            <input style="display:none;" id="UploadImg" type="file" name="image" accept="image/png, image/jpeg" />
                                            <div id="UploadPhotoDiv" class="mt-3">Upload Photo</div>
                                        </div>


                                    </center>

                                    <p id="error" style="color:red"></p>
                                </div>
                            </div>


                            <hr class="mt-5 mb-4">

                            <button type="submit" id="FormSubmit" class="btn btn-primary pull-right rounded rounded-lg"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Upload &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </button>
                            <button id="cancel" type="button" class="btn btn-primary pull-right rounded rounded-lg bg-transparent text-muted shadow-none mr-3">
                                <i class="material-icons mr-2">cached</i>  Cancel &nbsp; &nbsp;
                            </button>
                            <div class="clearfix"></div>

                        }

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>

    $(document).ready(function () {

        $("#PageHeader").html("Upload Image");

        $("#UploadImg").change(function () {
            readURL(this);
        });
         localStorage.ElementToActiveAfterPageLoad = "StudentHome";

    })

    $("#layout_navbar_toogle li").each(function () {

        $(this).css('display','none');
    })
    $("#security").css('display', 'none');

    //$("#layout_navbar_toogle li").click(function () {

    //    alert()
       
    //})

    $("#layout_navbar_toogle a").click(function () {
        //event.preventDefault();

        return false;
        //$(this).href = "";
    });


    function readURL(input) {
        $("#UploadPhotoDiv").hide();
        $("#imgPreview").height("150");
        $("#imgPreview").width("150");
        $("#FormSubmit").removeClass('hidden');
        $("#error").html("");
        var allowed = ["jpeg", "png", "jpg"];
        var found = false;

        if (input.files && input.files[0])
        {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#imgPreview').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);


            const fileSize = input.files[0].size / 1024 / 1024; // in MiB

            if (fileSize <= 4) {


                allowed.forEach(function (extension) {
                    if (input.files[0].type.match('image/' + extension)) {
                        found = true;
                    }

                })

              
                if (!found) {

                    $("#FormSubmit").addClass('hidden');

                    $("#error").html("Please upload image in jpg,png,jpeg...");

                }

            } //image size
            else {
                $("#FormSubmit").addClass('hidden');

                $("#error").html("Maximum image size is 4Mb");
            }

        }
    }

</script>

